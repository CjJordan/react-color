export * from './utils';

/**
 * ```js
 * rgbaToHsva({ r: 255, g: 255, b: 255, a: 1 }) //=> { h: 0, s: 0, v: 100, a: 1 }
 * ```
 */
export var rgbaToHsva = function rgbaToHsva(_ref) {
  var r = _ref.r,
      g = _ref.g,
      b = _ref.b,
      a = _ref.a;
  var max = Math.max(r, g, b);
  var delta = max - Math.min(r, g, b); // prettier-ignore

  var hh = delta ? max === r ? (g - b) / delta : max === g ? 2 + (b - r) / delta : 4 + (r - g) / delta : 0;
  return {
    h: round(60 * (hh < 0 ? hh + 6 : hh)),
    s: round(max ? delta / max * 100 : 0),
    v: round(max / 255 * 100),
    a: a
  };
};
export var hsvaToHslString = function hsvaToHslString(hsva) {
  var _hsvaToHsla = hsvaToHsla(hsva),
      h = _hsvaToHsla.h,
      s = _hsvaToHsla.s,
      l = _hsvaToHsla.l;

  return "hsl(".concat(h, ", ").concat(s, "%, ").concat(l, "%)");
};
export var hsvaToHsvString = function hsvaToHsvString(hsva) {
  var _roundHsva = roundHsva(hsva),
      h = _roundHsva.h,
      s = _roundHsva.s,
      v = _roundHsva.v;

  return "hsv(".concat(h, ", ").concat(s, "%, ").concat(v, "%)");
};
export var hsvaToHsvaString = function hsvaToHsvaString(hsva) {
  var _roundHsva2 = roundHsva(hsva),
      h = _roundHsva2.h,
      s = _roundHsva2.s,
      v = _roundHsva2.v,
      a = _roundHsva2.a;

  return "hsva(".concat(h, ", ").concat(s, "%, ").concat(v, "%, ").concat(a, ")");
};
export var hsvaToHslaString = function hsvaToHslaString(hsva) {
  var _hsvaToHsla2 = hsvaToHsla(hsva),
      h = _hsvaToHsla2.h,
      s = _hsvaToHsla2.s,
      l = _hsvaToHsla2.l,
      a = _hsvaToHsla2.a;

  return "hsla(".concat(h, ", ").concat(s, "%, ").concat(l, "%, ").concat(a, ")");
};
export var hslaStringToHsva = function hslaStringToHsva(hslString) {
  var matcher = /hsla?\(?\s*(-?\d*\.?\d+)(deg|rad|grad|turn)?[,\s]+(-?\d*\.?\d+)%?[,\s]+(-?\d*\.?\d+)%?,?\s*[/\s]*(-?\d*\.?\d+)?(%)?\s*\)?/i;
  var match = matcher.exec(hslString);
  if (!match) return {
    h: 0,
    s: 0,
    v: 0,
    a: 1
  };
  return hslaToHsva({
    h: parseHue(match[1], match[2]),
    s: Number(match[3]),
    l: Number(match[4]),
    a: match[5] === undefined ? 1 : Number(match[5]) / (match[6] ? 100 : 1)
  });
};
export var hslStringToHsva = hslaStringToHsva;
export var hslaToHsva = function hslaToHsva(_ref2) {
  var h = _ref2.h,
      s = _ref2.s,
      l = _ref2.l,
      a = _ref2.a;
  s *= (l < 50 ? l : 100 - l) / 100;
  return {
    h: h,
    s: s > 0 ? 2 * s / (l + s) * 100 : 0,
    v: l + s,
    a: a
  };
};
export var hsvaToHsla = function hsvaToHsla(_ref3) {
  var h = _ref3.h,
      s = _ref3.s,
      v = _ref3.v,
      a = _ref3.a;
  var hh = (200 - s) * v / 100;
  return {
    h: round(h),
    s: round(hh > 0 && hh < 200 ? s * v / 100 / (hh <= 100 ? hh : 200 - hh) * 100 : 0),
    l: round(hh / 2),
    a: round(a, 2)
  };
};
export var hsvaStringToHsva = function hsvaStringToHsva(hsvString) {
  var matcher = /hsva?\(?\s*(-?\d*\.?\d+)(deg|rad|grad|turn)?[,\s]+(-?\d*\.?\d+)%?[,\s]+(-?\d*\.?\d+)%?,?\s*[/\s]*(-?\d*\.?\d+)?(%)?\s*\)?/i;
  var match = matcher.exec(hsvString);
  if (!match) return {
    h: 0,
    s: 0,
    v: 0,
    a: 1
  };
  return roundHsva({
    h: parseHue(match[1], match[2]),
    s: Number(match[3]),
    v: Number(match[4]),
    a: match[5] === undefined ? 1 : Number(match[5]) / (match[6] ? 100 : 1)
  });
};
/**
 * Valid CSS <angle> units.
 * https://developer.mozilla.org/en-US/docs/Web/CSS/angle
 */

var angleUnits = {
  grad: 360 / 400,
  turn: 360,
  rad: 360 / (Math.PI * 2)
};
export var parseHue = function parseHue(value) {
  var unit = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'deg';
  return Number(value) * (angleUnits[unit] || 1);
};
export var hsvStringToHsva = hsvaStringToHsva;
export var rgbaStringToHsva = function rgbaStringToHsva(rgbaString) {
  var matcher = /rgba?\(?\s*(-?\d*\.?\d+)(%)?[,\s]+(-?\d*\.?\d+)(%)?[,\s]+(-?\d*\.?\d+)(%)?,?\s*[/\s]*(-?\d*\.?\d+)?(%)?\s*\)?/i;
  var match = matcher.exec(rgbaString);
  if (!match) return {
    h: 0,
    s: 0,
    v: 0,
    a: 1
  };
  return rgbaToHsva({
    r: Number(match[1]) / (match[2] ? 100 / 255 : 1),
    g: Number(match[3]) / (match[4] ? 100 / 255 : 1),
    b: Number(match[5]) / (match[6] ? 100 / 255 : 1),
    a: match[7] === undefined ? 1 : Number(match[7]) / (match[8] ? 100 : 1)
  });
};
export var rgbStringToHsva = rgbaStringToHsva;

var format = function format(number) {
  var hex = number.toString(16);
  return hex.length < 2 ? '0' + hex : hex;
};

export var rgbaToHex = function rgbaToHex(_ref4) {
  var r = _ref4.r,
      g = _ref4.g,
      b = _ref4.b;
  return '#' + format(r) + format(g) + format(b);
};
export var hexToHsva = function hexToHsva(hex) {
  return rgbaToHsva(hexToRgba(hex));
};
export var hexToRgba = function hexToRgba(hex) {
  if (hex[0] === '#') hex = hex.substr(1);

  if (hex.length < 6) {
    return {
      r: parseInt(hex[0] + hex[0], 16),
      g: parseInt(hex[1] + hex[1], 16),
      b: parseInt(hex[2] + hex[2], 16),
      a: 1
    };
  }

  return {
    r: parseInt(hex.substr(0, 2), 16),
    g: parseInt(hex.substr(2, 2), 16),
    b: parseInt(hex.substr(4, 2), 16),
    a: 1
  };
};
export var round = function round(number) {
  var digits = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;
  var base = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : Math.pow(10, digits);
  return Math.round(base * number) / base;
};
export var roundHsva = function roundHsva(hsva) {
  return {
    h: round(hsva.h),
    s: round(hsva.s),
    v: round(hsva.v),
    a: round(hsva.a, 2)
  };
};
export var hsvaToRgba = function hsvaToRgba(_ref5) {
  var h = _ref5.h,
      s = _ref5.s,
      v = _ref5.v,
      a = _ref5.a;
  h = h / 360 * 6;
  s = s / 100;
  v = v / 100;
  var hh = Math.floor(h),
      b = v * (1 - s),
      c = v * (1 - (h - hh) * s),
      d = v * (1 - (1 - h + hh) * s),
      module = hh % 6;
  return {
    r: round([v, c, b, b, d, v][module] * 255),
    g: round([d, v, v, c, b, b][module] * 255),
    b: round([b, b, d, v, v, c][module] * 255),
    a: round(a, 2)
  };
};
export var hsvaToRgbString = function hsvaToRgbString(hsva) {
  var _hsvaToRgba = hsvaToRgba(hsva),
      r = _hsvaToRgba.r,
      g = _hsvaToRgba.g,
      b = _hsvaToRgba.b;

  return "rgb(".concat(r, ", ").concat(g, ", ").concat(b, ")");
};
export var hsvaToRgbaString = function hsvaToRgbaString(hsva) {
  var _hsvaToRgba2 = hsvaToRgba(hsva),
      r = _hsvaToRgba2.r,
      g = _hsvaToRgba2.g,
      b = _hsvaToRgba2.b,
      a = _hsvaToRgba2.a;

  return "rgba(".concat(r, ", ").concat(g, ", ").concat(b, ", ").concat(a, ")");
};
export var rgbaToRgb = function rgbaToRgb(_ref6) {
  var r = _ref6.r,
      g = _ref6.g,
      b = _ref6.b;
  return {
    r: r,
    g: g,
    b: b
  };
};
export var hslaToHsl = function hslaToHsl(_ref7) {
  var h = _ref7.h,
      s = _ref7.s,
      l = _ref7.l;
  return {
    h: h,
    s: s,
    l: l
  };
};
export var hsvaToHex = function hsvaToHex(hsva) {
  return rgbaToHex(hsvaToRgba(hsva));
};
export var hsvaToHsv = function hsvaToHsv(hsva) {
  var _roundHsva3 = roundHsva(hsva),
      h = _roundHsva3.h,
      s = _roundHsva3.s,
      v = _roundHsva3.v;

  return {
    h: h,
    s: s,
    v: v
  };
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9pbmRleC50cyJdLCJuYW1lcyI6WyJyZ2JhVG9Ic3ZhIiwiciIsImciLCJiIiwiYSIsIm1heCIsIk1hdGgiLCJkZWx0YSIsIm1pbiIsImhoIiwiaCIsInJvdW5kIiwicyIsInYiLCJoc3ZhVG9Ic2xTdHJpbmciLCJoc3ZhIiwiaHN2YVRvSHNsYSIsImwiLCJoc3ZhVG9Ic3ZTdHJpbmciLCJyb3VuZEhzdmEiLCJoc3ZhVG9Ic3ZhU3RyaW5nIiwiaHN2YVRvSHNsYVN0cmluZyIsImhzbGFTdHJpbmdUb0hzdmEiLCJoc2xTdHJpbmciLCJtYXRjaGVyIiwibWF0Y2giLCJleGVjIiwiaHNsYVRvSHN2YSIsInBhcnNlSHVlIiwiTnVtYmVyIiwidW5kZWZpbmVkIiwiaHNsU3RyaW5nVG9Ic3ZhIiwiaHN2YVN0cmluZ1RvSHN2YSIsImhzdlN0cmluZyIsImFuZ2xlVW5pdHMiLCJncmFkIiwidHVybiIsInJhZCIsIlBJIiwidmFsdWUiLCJ1bml0IiwiaHN2U3RyaW5nVG9Ic3ZhIiwicmdiYVN0cmluZ1RvSHN2YSIsInJnYmFTdHJpbmciLCJyZ2JTdHJpbmdUb0hzdmEiLCJmb3JtYXQiLCJudW1iZXIiLCJoZXgiLCJ0b1N0cmluZyIsImxlbmd0aCIsInJnYmFUb0hleCIsImhleFRvSHN2YSIsImhleFRvUmdiYSIsInN1YnN0ciIsInBhcnNlSW50IiwiZGlnaXRzIiwiYmFzZSIsInBvdyIsImhzdmFUb1JnYmEiLCJmbG9vciIsImMiLCJkIiwibW9kdWxlIiwiaHN2YVRvUmdiU3RyaW5nIiwiaHN2YVRvUmdiYVN0cmluZyIsInJnYmFUb1JnYiIsImhzbGFUb0hzbCIsImhzdmFUb0hleCIsImhzdmFUb0hzdiJdLCJtYXBwaW5ncyI6IkFBQUEsY0FBYyxTQUFkOztBQTJCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTyxJQUFNQSxVQUFVLEdBQUcsU0FBYkEsVUFBYSxPQUEwQztBQUFBLE1BQXZDQyxDQUF1QyxRQUF2Q0EsQ0FBdUM7QUFBQSxNQUFw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QUNBLFNBQU87QUFBRUgsSUFBQUEsQ0FBQyxFQUFEQSxDQUFGO0FBQUtFLElBQUFBLENBQUMsRUFBREEsQ0FBTDtBQUFRQyxJQUFBQSxDQUFDLEVBQURBO0FBQVIsR0FBUDtBQUNELENBSE0iLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgKiBmcm9tICcuL3V0aWxzJztcblxuZXhwb3J0IHR5cGUgT2JqZWN0Q29sb3IgPVxuICB8IFJnYkNvbG9yXG4gIHwgSHNsQ29sb3JcbiAgfCBIc3ZDb2xvclxuICB8IFJnYmFDb2xvclxuICB8IEhzbGFDb2xvclxuICB8IEhzdmFDb2xvcjtcbmV4cG9ydCBpbnRlcmZhY2UgSHN2Q29sb3Ige1xuICBoOiBudW1iZXI7XG4gIHM6IG51bWJlcjtcbiAgdjogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEhzdmFDb2xvciBleHRlbmRzIEhzdkNvbG9yIHtcbiAgYTogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFJnYkNvbG9yIHtcbiAgcjogbnVtYmVyO1xuICBnOiBudW1iZXI7XG4gIGI6IG51bWJlcjtcbn1cbmV4cG9ydCBpbnRlcmZhY2UgUmdiYUNvbG9yIGV4dGVuZHMgUmdiQ29sb3Ige1xuICBhOiBudW1iZXI7XG59XG4vKipcbiAqIGBgYGpzXG4gKiByZ2JhVG9Ic3ZhKHsgcjogMjU1LCBnOiAyNTUsIGI6IDI1NSwgYTogMSB9KSAvLz0+IHsgaDogMCwgczogMCwgdjogMTAwLCBhOiAxIH1cbiAqIGBgYFxuICovXG5leHBvcnQgY29uc3QgcmdiYVRvSHN2YSA9ICh7IHIsIGcsIGIsIGEgfTogUmdiYUNvbG9yKTogSHN2YUNvbG9yID0+IHtcbiAgY29uc3QgbWF4ID0gTWF0aC5tYXgociwgZywgYik7XG4gIGNvbnN0IGRlbHRhID0gbWF4IC0gTWF0aC5taW4ociwgZywgYik7XG5cbiAgLy8gcHJldHRpZXItaWdub3JlXG4gIGNvbnN0IGhoID0gZGVsdGFcbiAgICA/IG1heCA9PT0gclxuICAgICAgPyAoZyAtIGIpIC8gZGVsdGFcbiAgICAgIDogbWF4ID09PSBnXG4gICAgICAgID8gMiArIChiIC0gcikgLyBkZWx0YVxuICAgICAgICA6IDQgKyAociAtIGcpIC8gZGVsdGFcbiAgICA6IDA7XG5cbiAgcmV0dXJuIHtcbiAgICBoOiByb3VuZCg2MCAqIChoaCA8IDAgPyBoaCArIDYgOiBoaCkpLFxuICAgIHM6IHJvdW5kKG1heCA/IChkZWx0YSAvIG1heCkgKiAxMDAgOiAwKSxcbiAgICB2OiByb3VuZCgobWF4IC8gMjU1KSAqIDEwMCksXG4gICAgYSxcbiAgfTtcbn07XG5cbmV4cG9ydCBjb25zdCBoc3ZhVG9Ic2xTdHJpbmcgPSAoaHN2YTogSHN2YUNvbG9yKTogc3RyaW5nID0+IHtcbiAgY29uc3QgeyBoLCBzLCBsIH0gPSBoc3ZhVG9Ic2xhKGhzdmEpO1xuICByZXR1cm4gYGhzbCgke2h9LCAke3N9JSwgJHtsfSUpYDtcbn07XG5cbmV4cG9ydCBjb25zdCBoc3ZhVG9Ic3ZTdHJpbmcgPSAoaHN2YTogSHN2YUNvbG9yKTogc3RyaW5nID0+IHtcbiAgY29uc3QgeyBoLCBzLCB2IH0gPSByb3VuZEhzdmEoaHN2YSk7XG4gIHJldHVybiBgaHN2KCR7aH0sICR7c30lLCAke3Z9JSlgO1xufTtcblxuZXhwb3J0IGNvbnN0IGhzdmFUb0hzdmFTdHJpbmcgPSAoaHN2YTogSHN2YUNvbG9yKTogc3RyaW5nID0+IHtcbiAgY29uc3QgeyBoLCBzLCB2LCBhIH0gPSByb3VuZEhzdmEoaHN2YSk7XG4gIHJldHVybiBgaHN2YSgke2h9LCAke3N9JSwgJHt2fSUsICR7YX0pYDtcbn07XG5cbmV4cG9ydCBjb25zdCBoc3ZhVG9Ic2xhU3RyaW5nID0gKGhzdmE6IEhzdmFDb2xvcik6IHN0cmluZyA9PiB7XG4gIGNvbnN0IHsgaCwgcywgbCwgYSB9ID0gaHN2YVRvSHNsYShoc3ZhKTtcbiAgcmV0dXJuIGBoc2xhKCR7aH0sICR7c30lLCAke2x9JSwgJHthfSlgO1xufTtcblxuZXhwb3J0IGNvbnN0IGhzbGFTdHJpbmdUb0hzdmEgPSAoaHNsU3RyaW5nOiBzdHJpbmcpOiBIc3ZhQ29sb3IgPT4ge1xuICBjb25zdCBtYXRjaGVyID1cbiAgICAvaHNsYT9cXCg/XFxzKigtP1xcZCpcXC4/XFxkKykoZGVnfHJhZHxncmFkfHR1cm4pP1ssXFxzXSsoLT9cXGQqXFwuP1xcZCspJT9bLFxcc10rKC0/XFxkKlxcLj9cXGQrKSU/LD9cXHMqWy9cXHNdKigtP1xcZCpcXC4/XFxkKyk/KCUpP1xccypcXCk/L2k7XG4gIGNvbnN0IG1hdGNoID0gbWF0Y2hlci5leGVjKGhzbFN0cmluZyk7XG5cbiAgaWYgKCFtYXRjaCkgcmV0dXJuIHsgaDogMCwgczogMCwgdjogMCwgYTogMSB9O1xuXG4gIHJldHVybiBoc2xhVG9Ic3ZhKHtcbiAgICBoOiBwYXJzZUh1ZShtYXRjaFsxXSwgbWF0Y2hbMl0pLFxuICAgIHM6IE51bWJlcihtYXRjaFszXSksXG4gICAgbDogTnVtYmVyKG1hdGNoWzRdKSxcbiAgICBhOiBtYXRjaFs1XSA9PT0gdW5kZWZpbmVkID8gMSA6IE51bWJlcihtYXRjaFs1XSkgLyAobWF0Y2hbNl0gPyAxMDAgOiAxKSxcbiAgfSk7XG59O1xuXG5leHBvcnQgY29uc3QgaHNsU3RyaW5nVG9Ic3ZhID0gaHNsYVN0cmluZ1RvSHN2YTtcblxuZXhwb3J0IGNvbnN0IGhzbGFUb0hzdmEgPSAoeyBoLCBzLCBsLCBhIH06IEhzbGFDb2xvcik6IEhzdmFDb2xvciA9PiB7XG4gIHMgKj0gKGwgPCA1MCA/IGwgOiAxMDAgLSBsKSAvIDEwMDtcblxuICByZXR1cm4ge1xuICAgIGg6IGgsXG4gICAgczogcyA+IDAgPyAoKDIgKiBzKSAvIChsICsgcykpICogMTAwIDogMCxcbiAgICB2OiBsICsgcyxcbiAgICBhLFxuICB9O1xufTtcblxuZXhwb3J0IGludGVyZmFjZSBIc2xDb2xvciB7XG4gIGg6IG51bWJlcjtcbiAgczogbnVtYmVyO1xuICBsOiBudW1iZXI7XG59XG5leHBvcnQgaW50ZXJmYWNlIEhzbGFDb2xvciBleHRlbmRzIEhzbENvbG9yIHtcbiAgYTogbnVtYmVyO1xufVxuZXhwb3J0IGNvbnN0IGhzdmFUb0hzbGEgPSAoeyBoLCBzLCB2LCBhIH06IEhzdmFDb2xvcik6IEhzbGFDb2xvciA9PiB7XG4gIGNvbnN0IGhoID0gKCgyMDAgLSBzKSAqIHYpIC8gMTAwO1xuXG4gIHJldHVybiB7XG4gICAgaDogcm91bmQoaCksXG4gICAgczogcm91bmQoXG4gICAgICBoaCA+IDAgJiYgaGggPCAyMDBcbiAgICAgICAgPyAoKHMgKiB2KSAvIDEwMCAvIChoaCA8PSAxMDAgPyBoaCA6IDIwMCAtIGhoKSkgKiAxMDBcbiAgICAgICAgOiAwLFxuICAgICksXG4gICAgbDogcm91bmQoaGggLyAyKSxcbiAgICBhOiByb3VuZChhLCAyKSxcbiAgfTtcbn07XG5cbmV4cG9ydCBjb25zdCBoc3ZhU3RyaW5nVG9Ic3ZhID0gKGhzdlN0cmluZzogc3RyaW5nKTogSHN2YUNvbG9yID0+IHtcbiAgY29uc3QgbWF0Y2hlciA9XG4gICAgL2hzdmE/XFwoP1xccyooLT9cXGQqXFwuP1xcZCspKGRlZ3xyYWR8Z3JhZHx0dXJuKT9bLFxcc10rKC0/XFxkKlxcLj9cXGQrKSU/WyxcXHNdKygtP1xcZCpcXC4/XFxkKyklPyw/XFxzKlsvXFxzXSooLT9cXGQqXFwuP1xcZCspPyglKT9cXHMqXFwpPy9pO1xuICBjb25zdCBtYXRjaCA9IG1hdGNoZXIuZXhlYyhoc3ZTdHJpbmcpO1xuXG4gIGlmICghbWF0Y2gpIHJldHVybiB7IGg6IDAsIHM6IDAsIHY6IDAsIGE6IDEgfTtcblxuICByZXR1cm4gcm91bmRIc3ZhKHtcbiAgICBoOiBwYXJzZUh1ZShtYXRjaFsxXSwgbWF0Y2hbMl0pLFxuICAgIHM6IE51bWJlcihtYXRjaFszXSksXG4gICAgdjogTnVtYmVyKG1hdGNoWzRdKSxcbiAgICBhOiBtYXRjaFs1XSA9PT0gdW5kZWZpbmVkID8gMSA6IE51bWJlcihtYXRjaFs1XSkgLyAobWF0Y2hbNl0gPyAxMDAgOiAxKSxcbiAgfSk7XG59O1xuXG4vKipcbiAqIFZhbGlkIENTUyA8YW5nbGU+IHVuaXRzLlxuICogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQ1NTL2FuZ2xlXG4gKi9cbmNvbnN0IGFuZ2xlVW5pdHM6IFJlY29yZDxzdHJpbmcsIG51bWJlcj4gPSB7XG4gIGdyYWQ6IDM2MCAvIDQwMCxcbiAgdHVybjogMzYwLFxuICByYWQ6IDM2MCAvIChNYXRoLlBJICogMiksXG59O1xuXG5leHBvcnQgY29uc3QgcGFyc2VIdWUgPSAodmFsdWU6IHN0cmluZywgdW5pdCA9ICdkZWcnKTogbnVtYmVyID0+IHtcbiAgcmV0dXJuIE51bWJlcih2YWx1ZSkgKiAoYW5nbGVVbml0c1t1bml0XSB8fCAxKTtcbn07XG5cbmV4cG9ydCBjb25zdCBoc3ZTdHJpbmdUb0hzdmEgPSBoc3ZhU3RyaW5nVG9Ic3ZhO1xuXG5leHBvcnQgY29uc3QgcmdiYVN0cmluZ1RvSHN2YSA9IChyZ2JhU3RyaW5nOiBzdHJpbmcpOiBIc3ZhQ29sb3IgPT4ge1xuICBjb25zdCBtYXRjaGVyID1cbiAgICAvcmdiYT9cXCg/XFxzKigtP1xcZCpcXC4/XFxkKykoJSk/WyxcXHNdKygtP1xcZCpcXC4/XFxkKykoJSk/WyxcXHNdKygtP1xcZCpcXC4/XFxkKykoJSk/LD9cXHMqWy9cXHNdKigtP1xcZCpcXC4/XFxkKyk/KCUpP1xccypcXCk/L2k7XG4gIGNvbnN0IG1hdGNoID0gbWF0Y2hlci5leGVjKHJnYmFTdHJpbmcpO1xuXG4gIGlmICghbWF0Y2gpIHJldHVybiB7IGg6IDAsIHM6IDAsIHY6IDAsIGE6IDEgfTtcblxuICByZXR1cm4gcmdiYVRvSHN2YSh7XG4gICAgcjogTnVtYmVyKG1hdGNoWzFdKSAvIChtYXRjaFsyXSA/IDEwMCAvIDI1NSA6IDEpLFxuICAgIGc6IE51bWJlcihtYXRjaFszXSkgLyAobWF0Y2hbNF0gPyAxMDAgLyAyNTUgOiAxKSxcbiAgICBiOiBOdW1iZXIobWF0Y2hbNV0pIC8gKG1hdGNoWzZdID8gMTAwIC8gMjU1IDogMSksXG4gICAgYTogbWF0Y2hbN10gPT09IHVuZGVmaW5lZCA/IDEgOiBOdW1iZXIobWF0Y2hbN10pIC8gKG1hdGNoWzhdID8gMTAwIDogMSksXG4gIH0pO1xufTtcblxuZXhwb3J0IGNvbnN0IHJnYlN0cmluZ1RvSHN2YSA9IHJnYmFTdHJpbmdUb0hzdmE7XG5cbmNvbnN0IGZvcm1hdCA9IChudW1iZXI6IG51bWJlcikgPT4ge1xuICBjb25zdCBoZXggPSBudW1iZXIudG9TdHJpbmcoMTYpO1xuICByZXR1cm4gaGV4Lmxlbmd0aCA8IDIgPyAnMCcgKyBoZXggOiBoZXg7XG59O1xuXG5leHBvcnQgY29uc3QgcmdiYVRvSGV4ID0gKHsgciwgZywgYiB9OiBSZ2JhQ29sb3IpOiBzdHJpbmcgPT4ge1xuICByZXR1cm4gJyMnICsgZm9ybWF0KHIpICsgZm9ybWF0KGcpICsgZm9ybWF0KGIpO1xufTtcblxuZXhwb3J0IGNvbnN0IGhleFRvSHN2YSA9IChoZXg6IHN0cmluZyk6IEhzdmFDb2xvciA9PiByZ2JhVG9Ic3ZhKGhleFRvUmdiYShoZXgpKTtcbmV4cG9ydCBjb25zdCBoZXhUb1JnYmEgPSAoaGV4OiBzdHJpbmcpOiBSZ2JhQ29sb3IgPT4ge1xuICBpZiAoaGV4WzBdID09PSAnIycpIGhleCA9IGhleC5zdWJzdHIoMSk7XG5cbiAgaWYgKGhleC5sZW5ndGggPCA2KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHI6IHBhcnNlSW50KGhleFswXSArIGhleFswXSwgMTYpLFxuICAgICAgZzogcGFyc2VJbnQoaGV4WzFdICsgaGV4WzFdLCAxNiksXG4gICAgICBiOiBwYXJzZUludChoZXhbMl0gKyBoZXhbMl0sIDE2KSxcbiAgICAgIGE6IDEsXG4gICAgfTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgcjogcGFyc2VJbnQoaGV4LnN1YnN0cigwLCAyKSwgMTYpLFxuICAgIGc6IHBhcnNlSW50KGhleC5zdWJzdHIoMiwgMiksIDE2KSxcbiAgICBiOiBwYXJzZUludChoZXguc3Vic3RyKDQsIDIpLCAxNiksXG4gICAgYTogMSxcbiAgfTtcbn07XG5cbmV4cG9ydCBjb25zdCByb3VuZCA9IChcbiAgbnVtYmVyOiBudW1iZXIsXG4gIGRpZ2l0cyA9IDAsXG4gIGJhc2UgPSBNYXRoLnBvdygxMCwgZGlnaXRzKSxcbik6IG51bWJlciA9PiB7XG4gIHJldHVybiBNYXRoLnJvdW5kKGJhc2UgKiBudW1iZXIpIC8gYmFzZTtcbn07XG5cbmV4cG9ydCBjb25zdCByb3VuZEhzdmEgPSAoaHN2YTogSHN2YUNvbG9yKTogSHN2YUNvbG9yID0+ICh7XG4gIGg6IHJvdW5kKGhzdmEuaCksXG4gIHM6IHJvdW5kKGhzdmEucyksXG4gIHY6IHJvdW5kKGhzdmEudiksXG4gIGE6IHJvdW5kKGhzdmEuYSwgMiksXG59KTtcblxuZXhwb3J0IGNvbnN0IGhzdmFUb1JnYmEgPSAoeyBoLCBzLCB2LCBhIH06IEhzdmFDb2xvcik6IFJnYmFDb2xvciA9PiB7XG4gIGggPSAoaCAvIDM2MCkgKiA2O1xuICBzID0gcyAvIDEwMDtcbiAgdiA9IHYgLyAxMDA7XG5cbiAgY29uc3QgaGggPSBNYXRoLmZsb29yKGgpLFxuICAgIGIgPSB2ICogKDEgLSBzKSxcbiAgICBjID0gdiAqICgxIC0gKGggLSBoaCkgKiBzKSxcbiAgICBkID0gdiAqICgxIC0gKDEgLSBoICsgaGgpICogcyksXG4gICAgbW9kdWxlID0gaGggJSA2O1xuXG4gIHJldHVybiB7XG4gICAgcjogcm91bmQoW3YsIGMsIGIsIGIsIGQsIHZdW21vZHVsZV0gKiAyNTUpLFxuICAgIGc6IHJvdW5kKFtkLCB2LCB2LCBjLCBiLCBiXVttb2R1bGVdICogMjU1KSxcbiAgICBiOiByb3VuZChbYiwgYiwgZCwgdiwgdiwgY11bbW9kdWxlXSAqIDI1NSksXG4gICAgYTogcm91bmQoYSwgMiksXG4gIH07XG59O1xuXG5leHBvcnQgY29uc3QgaHN2YVRvUmdiU3RyaW5nID0gKGhzdmE6IEhzdmFDb2xvcik6IHN0cmluZyA9PiB7XG4gIGNvbnN0IHsgciwgZywgYiB9ID0gaHN2YVRvUmdiYShoc3ZhKTtcbiAgcmV0dXJuIGByZ2IoJHtyfSwgJHtnfSwgJHtifSlgO1xufTtcblxuZXhwb3J0IGNvbnN0IGhzdmFUb1JnYmFTdHJpbmcgPSAoaHN2YTogSHN2YUNvbG9yKTogc3RyaW5nID0+IHtcbiAgY29uc3QgeyByLCBnLCBiLCBhIH0gPSBoc3ZhVG9SZ2JhKGhzdmEpO1xuICByZXR1cm4gYHJnYmEoJHtyfSwgJHtnfSwgJHtifSwgJHthfSlgO1xufTtcblxuZXhwb3J0IGNvbnN0IHJnYmFUb1JnYiA9ICh7IHIsIGcsIGIgfTogUmdiYUNvbG9yKTogUmdiQ29sb3IgPT4gKHsgciwgZywgYiB9KTtcbmV4cG9ydCBjb25zdCBoc2xhVG9Ic2wgPSAoeyBoLCBzLCBsIH06IEhzbGFDb2xvcik6IEhzbENvbG9yID0+ICh7IGgsIHMsIGwgfSk7XG5leHBvcnQgY29uc3QgaHN2YVRvSGV4ID0gKGhzdmE6IEhzdmFDb2xvcik6IHN0cmluZyA9PlxuICByZ2JhVG9IZXgoaHN2YVRvUmdiYShoc3ZhKSk7XG5leHBvcnQgY29uc3QgaHN2YVRvSHN2ID0gKGhzdmE6IEhzdmFDb2xvcik6IEhzdkNvbG9yID0+IHtcbiAgY29uc3QgeyBoLCBzLCB2IH0gPSByb3VuZEhzdmEoaHN2YSk7XG4gIHJldHVybiB7IGgsIHMsIHYgfTtcbn07XG4iXX0=